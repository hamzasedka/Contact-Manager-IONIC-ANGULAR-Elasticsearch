<ng-container *ngIf="this.vm$ | async as vm">
  <dom-dialog-layout (closeClick)="this.onCloseClick()" [canClose]="!!this.dialogRef">
    <form [formGroup]="formRegister" (ngSubmit)="this.onSave(vm.company)">
      <div fxLayout="column">
        <div fxLayoutAlign="center center">
          <button mat-raised-button color="accent" type="submit" [disabled]="!formRegister.valid">
            Ajouter
          </button>
        </div>
        <!-- name -->
        <mat-form-field color="accent">
          <input matInput type="text" formControlName="name" placeholder="Name" />
          <mat-error *ngIf="vm.nameError">{{ vm.nameError }}</mat-error>
        </mat-form-field>
        <!-- siren -->
        <mat-form-field color="accent">
          <textarea matInput formControlName="siren" placeholder="Siren"></textarea>
          <mat-error *ngIf="vm.sirenError">{{ vm.sirenError }}</mat-error>
        </mat-form-field>
        <!-- prefectoralId -->
        <mat-form-field color="accent">
          <textarea matInput formControlName="prefectoralId" placeholder="Agrément préfectoral"></textarea>
          <mat-error *ngIf="vm.prefectoralIdError">{{ vm.prefectoralIdError }}</mat-error>
        </mat-form-field>
        <!-- isHosting -->
        <div color="accent">
          <mat-checkbox formControlName="isHosting" placeholder="Peux appliquer un code promotion">Est un domiciliateur
          </mat-checkbox>
          <mat-error *ngIf="vm.isHostingError">{{ vm.isHosting }}</mat-error>
        </div>
        <!--  Kbis doc downloader -->
        <dom-fire-storage-uploader [label]="'Charger un kbis :'" formControlName="kbisDocIds"></dom-fire-storage-uploader>
      </div>
    </form>
  </dom-dialog-layout>
</ng-container>
